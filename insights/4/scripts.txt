Insights 4 - 2019:
Finds how many times, students used a WC request within 45 minutes after asking for:
- banana
- apple
- cupcake
- chocolate
- water
=============
DAY 1
=============
select sum((select count(*) from questions x where x.participation_id=q.participation_id and x.subject like '%#wc%' and x.question_timestamp > q.question_timestamp AND x.question_timestamp <= q.question_timestamp + (45 * interval '1 minute'))) cnt
from questions q 
where subject like '%#banana%' and question_timestamp < '2019-08-07';

banana - 67

select sum((select count(*) from questions x where x.participation_id=q.participation_id and x.subject like '%#wc%' and x.question_timestamp > q.question_timestamp AND x.question_timestamp <= q.question_timestamp + (45 * interval '1 minute'))) cnt
from questions q 
where subject = '#chocolate' and question_timestamp < '2019-08-07';

chocolate - 58

select sum((select count(*) from questions x where x.participation_id=q.participation_id and x.subject like '%#wc%' and x.question_timestamp > q.question_timestamp AND x.question_timestamp <= q.question_timestamp + (45 * interval '1 minute'))) cnt
from questions q 
where subject like '%#water%' and question_timestamp < '2019-08-07';

water - 91


select sum((select count(*) from questions x where x.participation_id=q.participation_id and x.subject like '%#wc%' and x.question_timestamp > q.question_timestamp AND x.question_timestamp <= q.question_timestamp + (45 * interval '1 minute'))) cnt
from questions q 
where subject like '%#cupcake%' and question_timestamp < '2019-08-07';

cupcake - 22

select sum((select count(*) from questions x where x.participation_id=q.participation_id and x.subject like '%#wc%' and x.question_timestamp > q.question_timestamp AND x.question_timestamp <= q.question_timestamp + (45 * interval '1 minute'))) cnt
from questions q 
where subject like '%#apple%' and question_timestamp < '2019-08-07';

apple - 8

========
DAY 2
========

select sum((select count(*) from questions x where x.participation_id=q.participation_id and x.subject like '%#wc%' and x.question_timestamp > q.question_timestamp AND x.question_timestamp <= q.question_timestamp + (45 * interval '1 minute'))) cnt
from questions q 
where subject = '#chocolate' and question_timestamp > '2019-08-07';

chocolate - 50

select sum((select count(*) from questions x where x.participation_id=q.participation_id and x.subject like '%#wc%' and x.question_timestamp > q.question_timestamp AND x.question_timestamp <= q.question_timestamp + (45 * interval '1 minute'))) cnt
from questions q 
where subject like '%#water%' and question_timestamp > '2019-08-07';

water - 68


select sum((select count(*) from questions x where x.participation_id=q.participation_id and x.subject like '%#wc%' and x.question_timestamp > q.question_timestamp AND x.question_timestamp <= q.question_timestamp + (45 * interval '1 minute'))) cnt
from questions q 
where subject like '%#cupcake%' and question_timestamp > '2019-08-07';

cupcake - 16

select sum((select count(*) from questions x where x.participation_id=q.participation_id and x.subject like '%#wc%' and x.question_timestamp > q.question_timestamp AND x.question_timestamp <= q.question_timestamp + (45 * interval '1 minute'))) cnt
from questions q 
where (subject like '%#apple%' or subject like '%#banana%') and question_timestamp > '2019-08-07';

apple - 55

